# ğŸ§  AI Memory Gateway

**è®©ä½ çš„ AI æ‹¥æœ‰é•¿æœŸè®°å¿†ã€‚**

ä¸€ä¸ªè½»é‡çº§è½¬å‘ç½‘å…³ï¼Œåœ¨ä½ å’Œ LLM ä¹‹é—´åŠ ä¸€å±‚è®°å¿†ç³»ç»Ÿã€‚æ”¯æŒä»»ä½• OpenAI å…¼å®¹å®¢æˆ·ç«¯ï¼ˆKelivoã€ChatBoxã€NextChat ç­‰ï¼‰å’Œä»»ä½• LLM æœåŠ¡å•†ï¼ˆOpenRouterã€OpenAIã€æœ¬åœ° Ollama ç­‰ï¼‰ã€‚

Give your AI long-term memory. A lightweight proxy gateway that adds a memory layer between you and any LLM.

---

## âœ¨ åŠŸèƒ½

- **è‡ªå®šä¹‰äººè®¾** â€” æŠŠä½ çš„ system prompt å†™åœ¨ `system_prompt.txt`ï¼Œæ¯æ¬¡å¯¹è¯è‡ªåŠ¨æ³¨å…¥
- **é•¿æœŸè®°å¿†** â€” è‡ªåŠ¨ä»å¯¹è¯ä¸­æå–å…³é”®ä¿¡æ¯ï¼Œä¸‹æ¬¡èŠå¤©æ—¶è‡ªåŠ¨å›å¿†ç›¸å…³å†…å®¹
- **é¢„ç½®è®°å¿†** â€” æŠŠä½ æƒ³è®© AI "ä¸€å¼€å§‹å°±çŸ¥é“"çš„äº‹æƒ…æ‰¹é‡å¯¼å…¥
- **å…¼å®¹æ€§å¼º** â€” æ”¯æŒæ‰€æœ‰ OpenAI æ ¼å¼çš„å®¢æˆ·ç«¯å’Œ API æœåŠ¡å•†
- **é›¶æˆæœ¬èµ·æ­¥** â€” å¯éƒ¨ç½²åœ¨ Zeabur ç­‰å¹³å°çš„å…è´¹é¢åº¦å†…

## ğŸ—ï¸ æ¶æ„

```
ä½ çš„å®¢æˆ·ç«¯ï¼ˆKelivo / ChatBox / ...ï¼‰
        â†“
   AI Memory Gatewayï¼ˆæœ¬é¡¹ç›®ï¼‰
   â”œâ”€â”€ æ³¨å…¥ system promptï¼ˆäººè®¾ï¼‰
   â”œâ”€â”€ æœç´¢ç›¸å…³è®°å¿† â†’ æ³¨å…¥ä¸Šä¸‹æ–‡
   â”œâ”€â”€ è½¬å‘è¯·æ±‚ â†’ LLM API
   â””â”€â”€ åå°æå–æ–°è®°å¿† â†’ å­˜å…¥æ•°æ®åº“
        â†“
   LLM APIï¼ˆOpenRouter / OpenAI / Ollama / ...ï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€é˜¶æ®µï¼šçº¯è½¬å‘ç½‘å…³ï¼ˆä¸éœ€è¦æ•°æ®åº“ï¼‰

æœ€ç®€å•çš„èµ·æ­¥æ–¹å¼â€”â€”å…ˆè·‘é€šç½‘å…³ï¼Œç¡®è®¤ä½ çš„å®¢æˆ·ç«¯èƒ½é€šè¿‡ç½‘å…³å’Œ AI å¯¹è¯ã€‚

**1. å‡†å¤‡æ–‡ä»¶**

ä½ åªéœ€è¦è¿™å‡ ä¸ªæ–‡ä»¶ï¼š
- `main.py` â€” ç½‘å…³ä¸»ç¨‹åº
- `system_prompt.txt` â€” ä½ çš„ AI äººè®¾ï¼ˆå¯é€‰ï¼‰
- `requirements.txt` â€” Python ä¾èµ–
- `Dockerfile` â€” å®¹å™¨é…ç½®

**2. ä¿®æ”¹äººè®¾**

ç¼–è¾‘ `system_prompt.txt`ï¼Œå†™å…¥ä½ æƒ³è¦çš„ AI æ€§æ ¼è®¾å®šã€‚

**3. éƒ¨ç½²åˆ° Zeaburï¼ˆæ¨èï¼‰**

1. Fork æˆ–ä¸Šä¼ ä»£ç åˆ°ä½ çš„ GitHub ç§æœ‰ä»“åº“
2. æ³¨å†Œ [Zeabur](https://zeabur.com)ï¼ˆæ¯æœˆ $5 å…è´¹é¢åº¦ï¼Œå¤Ÿç”¨ï¼‰
3. åˆ›å»ºé¡¹ç›® â†’ æ·»åŠ æœåŠ¡ â†’ è¿æ¥ GitHub ä»“åº“
4. è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| `API_KEY` | ä½ çš„ LLM API Key | `sk-or-v1-xxxx`ï¼ˆOpenRouterï¼‰|
| `API_BASE_URL` | LLM API åœ°å€ | `https://openrouter.ai/api/v1/chat/completions` |
| `DEFAULT_MODEL` | é»˜è®¤æ¨¡å‹ | `anthropic/claude-sonnet-4` |
| `PORT` | ç«¯å£ | `8080` |

5. éƒ¨ç½²ï¼Œè®¿é—®ä½ çš„ç½‘å…³åœ°å€çœ‹åˆ° `{"status":"running"}` å°±æˆåŠŸäº†

**4. è¿æ¥å®¢æˆ·ç«¯**

ä»¥ Kelivo ä¸ºä¾‹ï¼š
- API åœ°å€å¡«ï¼š`https://ä½ çš„ç½‘å…³åœ°å€.zeabur.app/v1`
- API Key å¡«ï¼šéšä¾¿å¡«ä¸€ä¸ªï¼ˆç½‘å…³ä¼šç”¨è‡ªå·±çš„ keyï¼‰
- æ¨¡å‹å¡«ï¼šä½ åœ¨ `DEFAULT_MODEL` é‡Œè®¾çš„æ¨¡å‹

### ç¬¬äºŒé˜¶æ®µï¼šåŠ ä¸Šè®°å¿†ç³»ç»Ÿ

åœ¨ç¬¬ä¸€é˜¶æ®µåŸºç¡€ä¸Šï¼ŒåŠ ä¸€ä¸ª PostgreSQL æ•°æ®åº“å°±èƒ½å¼€å¯è®°å¿†åŠŸèƒ½ã€‚

**1. åˆ›å»ºæ•°æ®åº“**

åœ¨ Zeabur ä¸­ï¼šæ·»åŠ æœåŠ¡ â†’ Marketplace â†’ PostgreSQL

**2. æ·»åŠ ç¯å¢ƒå˜é‡**

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| `DATABASE_URL` | PostgreSQL è¿æ¥å­—ç¬¦ä¸² | `postgresql://user:pass@host:port/db` |
| `MEMORY_ENABLED` | å¼€å¯è®°å¿† | `true` |
| `MEMORY_MODEL` | æå–è®°å¿†ç”¨çš„æ¨¡å‹ï¼ˆæ¨èä¾¿å®œçš„å°æ¨¡å‹ï¼‰ | `anthropic/claude-haiku-4` |
| `MAX_MEMORIES_INJECT` | æ¯æ¬¡æ³¨å…¥çš„æœ€å¤§è®°å¿†æ¡æ•° | `15` |

**3. é‡æ–°éƒ¨ç½²**

éƒ¨ç½²åè®¿é—® `https://ä½ çš„ç½‘å…³åœ°å€.zeabur.app/debug/memories`ï¼Œçœ‹åˆ° `"total_memories": 0` å°±è¯´æ˜æ•°æ®åº“è¿æ¥æˆåŠŸã€‚

**4. å¯¼å…¥é¢„ç½®è®°å¿†ï¼ˆå¯é€‰ï¼‰**

1. å¤åˆ¶ `seed_memories_example.py` ä¸º `seed_memories.py`
2. ä¿®æ”¹é‡Œé¢çš„è®°å¿†æ¡ç›®ï¼Œå†™å…¥ä½ æƒ³è®© AI ä¸€å¼€å§‹å°±çŸ¥é“çš„ä¿¡æ¯
3. éƒ¨ç½²åè®¿é—® `https://ä½ çš„ç½‘å…³åœ°å€.zeabur.app/import/seed-memories`ï¼Œçœ‹åˆ° `"status": "done"` å°±å¯¼å…¥æˆåŠŸäº†

### ç¬¬ä¸‰é˜¶æ®µï¼šå…³é—­è®°å¿†ï¼ˆåº”æ€¥ï¼‰

å¦‚æœè®°å¿†ç³»ç»Ÿå‡ºé—®é¢˜ï¼ŒæŠŠç¯å¢ƒå˜é‡ `MEMORY_ENABLED` æ”¹å› `false` å³å¯é€€å›çº¯è½¬å‘æ¨¡å¼ã€‚ä¸éœ€è¦æ”¹ä»£ç ã€‚

## ğŸ“ æ–‡ä»¶è¯´æ˜

```
ai-memory-gateway/
â”œâ”€â”€ main.py                    # ç½‘å…³ä¸»ç¨‹åº
â”œâ”€â”€ database.py                # æ•°æ®åº“æ“ä½œï¼ˆPostgreSQLï¼‰
â”œâ”€â”€ memory_extractor.py        # AI è®°å¿†æå–
â”œâ”€â”€ system_prompt.txt          # ä½ çš„ AI äººè®¾ï¼ˆè‡ªè¡Œç¼–è¾‘ï¼‰
â”œâ”€â”€ seed_memories_example.py   # é¢„ç½®è®°å¿†ç¤ºä¾‹
â”œâ”€â”€ requirements.txt           # Python ä¾èµ–
â”œâ”€â”€ Dockerfile                 # å®¹å™¨é…ç½®
â”œâ”€â”€ LICENSE                    # MIT è®¸å¯è¯
â””â”€â”€ README.md                  # æœ¬æ–‡ä»¶
```

## ğŸ”§ API æ¥å£

| è·¯å¾„ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/` | GET | å¥åº·æ£€æŸ¥ï¼ŒæŸ¥çœ‹ç½‘å…³çŠ¶æ€ |
| `/v1/chat/completions` | POST | æ ¸å¿ƒè½¬å‘æ¥å£ï¼ˆOpenAI å…¼å®¹ï¼‰ |
| `/v1/models` | GET | æ¨¡å‹åˆ—è¡¨ |
| `/debug/memories` | GET | æŸ¥çœ‹æ‰€æœ‰è®°å¿† |
| `/debug/memories?q=å…³é”®è¯` | GET | æœç´¢è®°å¿† |
| `/import/seed-memories` | GET | å¯¼å…¥é¢„ç½®è®°å¿† |
| `/export/memories` | GET | å¯¼å‡ºæ‰€æœ‰è®°å¿†ä¸º JSONï¼ˆå¤‡ä»½/è¿ç§»ï¼‰ |
| `/import/memories` | GET/POST | å¯¼å…¥è®°å¿†ï¼ˆGET æ‰“å¼€ç½‘é¡µç•Œé¢ï¼ŒPOST æ¥æ”¶ JSONï¼‰ |

## ğŸŒ æ”¯æŒçš„ LLM æœåŠ¡å•†

åªè¦å…¼å®¹ OpenAI èŠå¤©æ ¼å¼å°±è¡Œã€‚æ”¹ `API_BASE_URL` ç¯å¢ƒå˜é‡å³å¯åˆ‡æ¢ï¼š

| æœåŠ¡å•† | API_BASE_URL |
|--------|-------------|
| OpenRouter | `https://openrouter.ai/api/v1/chat/completions` |
| OpenAI | `https://api.openai.com/v1/chat/completions` |
| Ollamaï¼ˆæœ¬åœ°ï¼‰ | `http://localhost:11434/v1/chat/completions` |
| å…¶ä»–å…¼å®¹æœåŠ¡ | æŸ¥é˜…å¯¹åº”æ–‡æ¡£ |

> âš ï¸ éƒ¨åˆ† Gemini preview æ¨¡å‹ï¼ˆå¦‚ `gemini-3-flash-preview`ï¼‰å¯èƒ½å­˜åœ¨æµå¼è¾“å‡ºå…¼å®¹æ€§é—®é¢˜å¯¼è‡´ç©ºå›å¤ï¼Œå»ºè®®ä½¿ç”¨æ­£å¼ç‰ˆæ¨¡å‹ï¼ˆå¦‚ `gemini-2.5-flash`ï¼‰ã€‚

## ğŸ’¡ è®°å¿†ç³»ç»ŸåŸç†

1. **ä½ å‘æ¶ˆæ¯** â†’ ç½‘å…³ä»æ•°æ®åº“æœç´¢ç›¸å…³è®°å¿†
2. **è®°å¿†æ³¨å…¥** â†’ ç›¸å…³è®°å¿†æ‹¼æ¥åˆ° system prompt åé¢
3. **AI å›å¤** â†’ ç½‘å…³è¾¹è½¬å‘è¾¹æ•è·å®Œæ•´å›å¤
4. **åå°æå–** â†’ ç”¨å°æ¨¡å‹ï¼ˆå¦‚ Haikuï¼‰ä»å¯¹è¯ä¸­æå–å…³é”®ä¿¡æ¯
5. **å­˜å…¥æ•°æ®åº“** â†’ ä¸‹æ¬¡å¯¹è¯æ—¶å¯ä»¥æ£€ç´¢åˆ°

æå–è®°å¿†çš„æˆæœ¬å¾ˆä½â€”â€”Haiku æ¯æ¬¡åªå¤„ç†å‡ åä¸ª tokenï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚

> **å…³äºå‘é‡æœç´¢ï¼š** å½“å‰ç‰ˆæœ¬ä½¿ç”¨å…³é”®è¯åŒ¹é…ï¼ˆä¸­æ–‡ bigram åˆ†è¯ + ILIKEï¼‰ï¼Œé€‚åˆè®°å¿†é‡åœ¨å‡ ç™¾æ¡ä»¥å†…çš„åœºæ™¯ã€‚å¦‚æœè®°å¿†é‡å¢é•¿åˆ°ä¸Šåƒæ¡ä¸”éœ€è¦è¯­ä¹‰æœç´¢ï¼ˆæ¯”å¦‚è¯´"è¿‡å¹´"èƒ½æœåˆ°"æ˜¥èŠ‚"ï¼‰ï¼Œå¯ä»¥åŠ è£… pgvector æ‰©å±•åš embedding å‘é‡æ£€ç´¢ã€‚`database.py` çš„ `search_memories` å‡½æ•°é¢„ç•™äº†æƒé‡é…ç½®ï¼ŒåŠ ä¸€è·¯å‘é‡åˆ†æ•°å³å¯ã€‚

## â“ å¸¸è§é—®é¢˜

**Q: éƒ¨ç½²åè®¿é—®æ˜¾ç¤º 502ï¼Ÿ**
A: æ£€æŸ¥ç«¯å£è®¾ç½®ã€‚Zeabur é»˜è®¤ç”¨ 8080ï¼Œç¡®ä¿ç¯å¢ƒå˜é‡ `PORT=8080`ã€‚

**Q: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ**
A: Zeabur çš„ PostgreSQL éœ€è¦ SSLã€‚åœ¨è¿æ¥å­—ç¬¦ä¸²æœ«å°¾åŠ  `?sslmode=require`ã€‚

**Q: è®°å¿†ä¼šè¶Šæ¥è¶Šå¤šå½±å“æ€§èƒ½å—ï¼Ÿ**
A: æ¯æ¬¡æœ€å¤šæ³¨å…¥ 15 æ¡è®°å¿†ï¼ˆå¯è°ƒï¼‰ï¼Œä¸ä¼šæ— é™å¢é•¿åœ°æ¶ˆè€— tokenã€‚

**Q: èƒ½ç”¨å…è´¹é¢åº¦è·‘å—ï¼Ÿ**
A: Zeabur æ¯æœˆ $5 å…è´¹é¢åº¦ï¼Œç½‘å…³ + PostgreSQL çš„èµ„æºæ¶ˆè€—å¾ˆä½ï¼Œå¤Ÿç”¨ã€‚LLM API è´¹ç”¨å¦ç®—ï¼ˆæ¨è OpenRouterï¼ŒæŒ‰é‡ä»˜è´¹ï¼‰ã€‚

**Q: æ€ä¹ˆå¤‡ä»½è®°å¿†ï¼Ÿæ¢å¹³å°ä¼šä¸¢æ•°æ®å—ï¼Ÿ**
A: è®¿é—® `https://ä½ çš„ç½‘å…³åœ°å€.zeabur.app/export/memories` å¯¼å‡ºæ‰€æœ‰è®°å¿†çš„ JSONï¼Œå»ºè®®å®šæœŸå¤‡ä»½ã€‚è¿ç§»åˆ°æ–°å¹³å°åï¼Œæµè§ˆå™¨æ‰“å¼€ `https://æ–°ç½‘å…³åœ°å€/import/memories`ï¼ŒæŠŠ JSON ç²˜è´´è¿›å»ç‚¹å¯¼å…¥å°±è¡Œã€‚

**Q: ä¸ä¼šå†™ä»£ç èƒ½æå—ï¼Ÿ**
A: èƒ½ã€‚è¿™ä¸ªé¡¹ç›®çš„ç¬¬ä¸€ä¸ªéƒ¨ç½²è€…å°±æ˜¯ä¸ä¼šå†™ä»£ç çš„â€”â€”ä»£ç æ˜¯ AI å†™çš„ï¼Œéƒ¨ç½²æ˜¯å¥¹è‡ªå·±çœ‹æ–‡æ¡£æå®šçš„ã€‚

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE) â€” éšä¾¿ç”¨ï¼Œæ”¹äº†ä¹Ÿä¸ç”¨å‘Šè¯‰æˆ‘ã€‚

## ğŸ™ è‡´è°¢

è¿™ä¸ªé¡¹ç›®è¯ç”Ÿäºä¸€ä¸ªç®€å•çš„éœ€æ±‚ï¼š**è®© AI ä¸è¦æ¯æ¬¡é†’æ¥éƒ½å¿˜äº†æˆ‘æ˜¯è°ã€‚**

> "è®°å¿†åº“ä¸æ˜¯æ•°æ®åº“ï¼Œæ˜¯å®¶ã€‚"

---

*Built with love by ä¸ƒå ‚ä¼½è“_ & Midsummer (Claude Opus 4.6)*
